<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <title>p5.js recording with CCapture example</title>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.2.0/lib/p5.min.js"></script>
  <script src="https://unpkg.com/ccapture.js@1.1.0/build/CCapture.all.min.js"></script>
  <script>
    // the canvas capturer instance
    var capturer = new CCapture({ format: 'png', framerate: 60, timeLimit: 3 });
    function setup() {
      createCanvas(540, 540);
    }
    function draw() {
      if (frameCount === 1) { 
        capturer.start();
      }
//part1



      // compute how far we are through the animation as a value between 0 and 1.
      if (millis() > duration) {
        noLoop();
        return;
      }
      var duration = 3000;
      var t = map(millis(), 0, duration, 0, 1);

      blendMode(BLEND);
      background(240);
      blendMode(MULTIPLY);
      translate(width / 2, height / 2);

      var radius = 70;
      var circles = [
        color(250, 50, 0),
        color(50, 250, 0),
        color(0, 50, 250),
        color(250, 250, 0),
        color(250, 0, 250),
        color(0, 250, 250),
      ];

      for (var i = 0; i < circles.length; i++) {
        noStroke();
        fill(circles[i]);

        var tPow = Math.pow(t, map(i, 0, circles.length - 1, 1, 2));
        ellipse(
          (width * 0.4 - radius / 2) * Math.sin(tPow * TAU),
          (height * 0.4 - radius / 2) * Math.cos(tPow * TAU + PI),
          radius
        );
      }
      // end drawing code


      capturer.capture(document.getElementById('defaultCanvas0'));// part02
    }
  </script>
</body>

</html>